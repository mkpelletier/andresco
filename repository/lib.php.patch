25a26,37
>  /**
>   * Enhanced by Andresco
>   * http://www.androgogic.com/andresco
>   * 
>   * This is the repository/lib.php file delivered with Moodle 2.5
>   * with enhancements specific to Andresco.
>   * 
>   * @copyright 	2012+ Androgogic Pty Ltd
>   * @since	2.5
>   *
>   **/
>  
1065,1066c1077,1080
<         if ($args['onlyvisible'] == true) {
<             $sql .= " AND r.visible = 1";
---
>         if ($onlyvisible == true) {
>             // BEGIN: Andresco
>             $sql .= " AND (r.visible = 1) AND (i.disable = '0')";
>             // END: Andresco
1104a1119,1131
>             // BEGIN: Andresco                
>             if ($repository->options['type'] == 'andresco') {
>             	// If the content access method is set to link (not copy)
>                 if ($repository->options['content_access_method'] == 'link') {
>                 	// Disable file internal when using link option as that means store the file
>         	        // within Moodle file repository (and not link to an external URL)
>                     if (isset($args['return_types']) and $args['return_types'] == FILE_INTERNAL) {
>                     	$repository->disabled = TRUE;
>                     }
>                 }					
>             }                
>             // END: Andresco		
> 
1587a1615,1618
>         // BEGIN: Andresco
>         $actionstr = get_string('actionrepository', 'repository_andresco');
>         // END: Andresco
>         
1627a1659,1675
>                 // BEGIN: Andresco
>                 $actionurl = "";
>                 if(!$i->instance->disable){
>                     $disablestr = get_string('disable');
>                     $disable = '';
>                     $disableurl = new moodle_url($baseurl);
>                     $disableurl->param('disable', $i->id);
>                     $disableurl->param('type', $i->options['type']);
>                     $actionurl .= html_writer::link($disableurl, $disablestr);
>                 } else {
>                     $enablestr = get_string('enable');
> 		            $enableurl = new moodle_url($baseurl);
>                     $enableurl->param('enable', $i->id);
>                     $enableurl->param('type', $i->options['type']);
>                     $actionurl .= html_writer::link($enableurl, $enablestr);
>                 }
>                 // END: Andresco
1631c1679,1681
<             $table->data[] = array(format_string($i->name), $type->get_readablename(), $settings, $delete);
---
>             // BEGIN: Andresco
>             $table->data[] = array(format_string($i->name), $type->get_readablename(), $settings, $delete, $actionurl);
>             // END: Andresco
2079a2130
> 
